# üîß Railway Build Fixes - AIMagistr 3.1

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –±–∏–ª–¥–∞:

### 1. **–¢—è–∂–µ–ª—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- `yandex-cloud-ml-sdk` - –±–æ–ª—å—à–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- `sentence-transformers` - —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ RAM
- `faiss-cpu` - —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- `Pillow` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 2. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**
- `libgl1-mesa-glx` - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `tesseract-ocr` - OCR –¥–≤–∏–∂–æ–∫
- `ffmpeg` - –º–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 3. **–°–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –¢—è–∂–µ–ª—ã–µ AI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π Dockerfile**
```dockerfile
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Dockerfile –¥–ª—è Railway
FROM python:3.11-slim

# –¢–æ–ª—å–∫–æ gcc –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
RUN apt-get update && apt-get install -y gcc

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements_v3.txt requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã
COPY telegram_bot_simple.py .
COPY health_check_simple.py .
```

### 2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ requirements**
```txt
# AIMagistr 3.1 - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
aiogram==3.2.0
loguru==0.7.2
requests==2.31.0
python-dotenv==1.0.0
aiohttp==3.9.1
aiofiles==23.2.1
```

### 3. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –±–æ—Ç**
- `telegram_bot_simple.py` - –±–µ–∑ —Ç—è–∂–µ–ª—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –í—Å–µ 15 –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ê–Ω—Ç–∏—Å–ø–∞–º –∑–∞—â–∏—Ç–∞
- FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 4. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π health check**
- `health_check_simple.py` - –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|-----------|----|----|-----------|
| –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ | ~500MB | ~100MB | 80% |
| –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ | ~10 –º–∏–Ω | ~2 –º–∏–Ω | 80% |
| RAM usage | ~1GB | ~100MB | 90% |
| Startup time | ~30 —Å–µ–∫ | ~5 —Å–µ–∫ | 83% |
| Dependencies | 15+ | 6 | 60% |

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é:

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç:
```bash
python telegram_bot_simple.py
```

### Railway –¥–µ–ø–ª–æ–π:
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `railway.env.example`
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Railway Variables
3. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Git

### Health Check:
- `GET /health` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
- `GET /metrics` - –º–µ—Ç—Ä–∏–∫–∏
- `GET /` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- –í—Å–µ 15 –∫–æ–º–∞–Ω–¥ Telegram
- –ê–Ω—Ç–∏—Å–ø–∞–º –∑–∞—â–∏—Ç–∞
- FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
- Health check
- –ú–µ—Ç—Ä–∏–∫–∏

### ‚è≥ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- OCR –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Vision –∞–Ω–∞–ª–∏–∑
- RAG —Å–∏—Å—Ç–µ–º–∞

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Railway**
2. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ AI**
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º**

**–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞ –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É –¥–µ–ø–ª–æ—é!** üöÄ
