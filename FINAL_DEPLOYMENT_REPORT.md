# üöÄ AIMagistr 3.1 - –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Railway

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

### üì¶ **–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:**

#### **1. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `telegram_bot_final.py` - –§–∏–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- `health_check_final.py` - –°—Ç–∞–±–∏–ª—å–Ω—ã–π health check
- `requirements_final.txt` - –¢–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `Dockerfile.railway` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile
- `railway.toml.final` - –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway

#### **2. –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ Graceful shutdown —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ê–Ω—Ç–∏—Å–ø–∞–º –∑–∞—â–∏—Ç–∞
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ Health check endpoints
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å appuser)

### üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

#### **15 –∫–æ–º–∞–Ω–¥ Telegram:**
- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/features` - –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- `/reset` - –°–±—Ä–æ—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `/metrics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/status` - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- `/mailtriage` - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–∏—Å–µ–º
- `/timeblock` - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- `/receipt` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ–∫–æ–≤
- `/routine` - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä—É—Ç–∏–Ω
- `/subscribe` - –¢—Ä–µ–∫–µ—Ä –ø–æ–¥–ø–∏—Å–æ–∫
- `/trip` - –ü–æ–º–æ—â–Ω–∏–∫ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π
- `/catalog` - –ê–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `/focus` - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ñ–æ–∫—É—Å
- `/read` - –û—á–µ—Ä–µ–¥—å —á—Ç–µ–Ω–∏—è
- `/crm` - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π CRM
- `/health` - –ó–¥–æ—Ä–æ–≤—å–µ –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- `/jobs` - –î–∂–æ–±-–∞–ª–µ—Ä—Ç—ã
- `/weekly` - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- `/shop` - –°–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫

#### **Health Check endpoints:**
- `GET /health` - –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `GET /metrics` - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `GET /status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

#### **–†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:**
- `telegram_bot_final.py`: ~45KB
- `health_check_final.py`: ~8KB
- `requirements_final.txt`: ~200B
- `Dockerfile.railway`: ~1KB
- `railway.toml.final`: ~400B

#### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `aiogram==3.2.0` - Telegram Bot API
- `loguru==0.7.2` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `requests==2.31.0` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `python-dotenv==1.0.0` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `aiohttp==3.9.1` - HTTP —Å–µ—Ä–≤–µ—Ä
- `aiofiles==23.2.1` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `cryptography==41.0.4` - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (~100MB)
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (~5 —Å–µ–∫)
- –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ RAM (~100MB)
- Graceful shutdown
- Health check –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### üöÄ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é:**

#### **1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
cp Dockerfile.railway Dockerfile
cp railway.toml.final railway.toml
cp requirements_final.txt requirements.txt
cp telegram_bot_final.py telegram_bot.py
cp health_check_final.py health_check.py
```

#### **2. Railway Variables:**
```bash
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
YANDEX_API_KEY=your_yandex_api_key
YANDEX_FOLDER_ID=your_folder_id
YANDEX_MODEL_URI=gpt://b1gej5c8msk7iqfjv11p/yandexgpt/latest
PORT=8000
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
```

#### **3. –î–µ–ø–ª–æ–π:**
```bash
# –ß–µ—Ä–µ–∑ Railway CLI
railway login
railway link
railway up

# –ò–ª–∏ —á–µ—Ä–µ–∑ Git
git add .
git commit -m "Final deployment"
git push origin main
```

### üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

#### **Health Check:**
- URL: `https://your-app.railway.app/health`
- –°—Ç–∞—Ç—É—Å: 200 OK
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: telegram_bot, health_check, database, storage

#### **–ú–µ—Ç—Ä–∏–∫–∏:**
- URL: `https://your-app.railway.app/metrics`
- Uptime, request_count, error_count, error_rate

#### **–°—Ç–∞—Ç—É—Å:**
- URL: `https://your-app.railway.app/status`
- –í–µ—Ä—Å–∏—è, —Å—Ç–∞—Ç—É—Å, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

### üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

#### **–ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:**
1. **AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Yandex AI
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –º–µ—Ç—Ä–∏–∫
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –°–±–æ—Ä –æ—Ç–∑—ã–≤–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üèÜ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

**AIMagistr 3.1 Final –≥–æ—Ç–æ–≤ –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É –¥–µ–ø–ª–æ—é –Ω–∞ Railway!** üöÄ‚ú®

#### **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Graceful shutdown
- ‚úÖ Health check –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –ê–Ω—Ç–∏—Å–ø–∞–º –∑–∞—â–∏—Ç–∞
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–µ–ø–ª–æ–π –≥–æ—Ç–æ–≤!** üéâ
